# 救砖

[[toc]]

---

APatch 内置了一套救砖机制，可以帮助你刷入了错误的模块导致不开机时快速禁用所有模块重新开机。

:::warning
这只能帮助你在**刷入了错误模块或模块冲突等导致的无法开机时**帮助你，而**不能帮助你解决被格机、被清空数据等问题！**
:::

## 触发机制

- 音量键救砖

在**长按电源键并亮屏后，连续按下-松开直至第一屏亮起**。这样 APatch 内置的安全模式就会被启用，所有的模块将被禁用。

:::info
APatch 对于音量键的监听范围较大。即使 `post-fs` 已经执行，如果监听到安全模式的信号，APatch 将会撤回在 `post-fs` 阶段所做出的修改。

或者说，在 `sys.boot_completed=1` 之前都有效。
:::

- REC 启动安全模式

一些 ROM，比如 MIUI/HyperOS，可以在它们的 Recovery 中打开安全模式。重启到 Recovery 并开启 ROM 自带的安全模式，也会启动 APatch 的安全模式。

---

:::tip
进入安全模式以后，APatch 管理器的系统模块页面所有模块都将处于禁用状态，但你可以执行“卸载”操作，卸载可能会有问题的模块。
:::

## 一些问题

### 启用安全模式后系统仍然崩溃

可能是撤回 `post-fs` 修改失败导致崩溃，再次强制重启即可解决。

### 通过 REC 等方式进入安全模式后没有看到 APatch 管理器

此时你的设备应该已经进入了 Android 的安全模式。

Android 安全模式的规则是：进入安全模式后，Android 会禁用所有的非系统应用。由于 APatch 管理器不会将自身注册为系统应用，这一规则会导致 APatch 管理器在进入安全模式后被禁用。

这一现象是正常现象，并且如果你没有使用任何方式将 APatch 固化为系统应用，那么这代表着 Android 和 APatch 的安全模式工作都一切正常。你只需要再次重启你的设备，Android 就会退出安全模式，同时 APatch 管理器就会被恢复，并且 APatch 不会退出安全模式，此时你就可以将存在问题的模块禁用了。
