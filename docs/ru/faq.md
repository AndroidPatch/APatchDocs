# Частые вопросы

## Что такое APatch?

::: info
[Здесь](/ru/what-is-apatch) вы можете найти более полную информацию
:::

APatch - это root-решение, похожее на Magisk или KernelSU и являющееся одним из лучших. Оно сочетает в себе простой и удобный метод установки через `boot.img` как у Magisk, и мощные возможности KernelSU по работе на уровне ядра.

## В чем разница между APatch и Magisk?

Magisk изменяет систему `init` с помощью патча `ramdisk` вашего загрузочного образа. APatch же патчит ядро напрямую.

## В чем разница между APatch и KernelSU?

KernelSU требует исходный код ядра вашего устройства, который не всегда предоставляется OEM-производителем (вендором). APatch же требует лишь ваш изначальный `boot.img`.

## В чем разница между APatch, Magisk и KernelSU?

APatch позволяет опционально не изменять SELinux, что означает, что поток приложения может получать root-права без `libsu` и `IPC`.

Так же есть модули ядра - **KPModule**.

## Что такое KPModule?

Модуль, который может выполнять код в пространстве ядра, подобно **Loadable Kernel Modules** (LKM, загружаемые модули ядра).

Кроме того, KPM предоставляет возможность выполнять `inline-hook` и `syscall-table-hook` в пространстве ядра.

Пожалуйста, прочтите [как написать KPM](https://github.com/bmax121/KernelPatch/blob/main/doc/zh-CN/module.md) для более подробной информации.

## Как связаны APatch и KernelPatch?

APatch зависит от KernelPatch. Он унаследовал все его возможности и был расширен.

Вы можете установить только KernelPatch, но это не позволит вам использовать APM (APatch Modules).

Чтобы использовать управление правами суперпользователя, кроме KernelPatch необходимо также установить APatch.

[Узнайте больше о KernelPatch](https://github.com/bmax121/KernelPatch).

## Что такое SuperKey?

KernelPatch добавляет новый системный вызов (syscall) для предоставления всех возможностей приложениям и программам в пользовательском пространстве. Этот системный вызов называется **SuperCall**. Когда приложение/программа пытается вызвать **SuperCall**, ей необходимо предоставить ключ доступа, известный как **SuperKey**. **SuperCall** может быть успешно вызван только в том случае, если **SuperKey** верен, а если он неверен, то вызывающая программа не будет исполнена.

## Как обрабатывается SELinux?

KernelPatch не изменяет контекст SELinux, а обходит SELinux через хук. Это позволяет вам рутировать поток Android в контексте приложения без необходимости использовать `libsu` для запуска нового процесса и последующего выполнения `IPC`.

Кроме того, APatch использует `magiskpolicy` для добавления дополнительной поддержки SELinux напрямую.

## WebUI (веб-интерфейс) APM/KPM

Исходный код APatch был заимствован и модифицирован из KernelSU, поэтому APatch представил функцию WebUI с версии [10568](https://github.com/bmax121/APatch/releases/tag/10568) после того, как KernelSU представил функцию WebUI.

Реализация и требования к APatch WebUI полностью совпадают с KernelSU. WebUI, разработанный для модулей KernelSU, может прекрасно работать в APatch.

Если вы хотите разработать WebUI для APM или KPM, пожалуйста, обратитесь к [WebUI introduction](https://kernelsu.org/guide/module-webui.html) KernelSU для получения дополнительной информации.

## Не удается установить модули (ошибка os 2/5/22)?

Отзовите root права для приложения «shell» на странице суперпользователя.

## Приложение получает/теряет права root автоматически при перезагрузке устройства?

Прочтите [это](https://t.me/APatchChannel/74).

## Можно ли использовать LSPosed?

Запуск LSPosed зависит от Riru или Zygisk, но по умолчанию в APatch не поддерживается Riru или Zygisk, поэтому вы не можете использовать LSPosed напрямую.

Однако в APatch можно добавить поддержку Zygisk или позволить LSPosed работать без какой-либо реализации Zygisk, установив определенные APM (APatch Modules).

Вот два решения по запуску LSPosed на APatch:

1. Обратитесь к [Поддерживается ли Zygisk?](#zygisk-support) чтобы добавить поддержку Zygisk.
2. Если вам нужно использовать только LSPosed без других функций Zygisk, вы можете попробовать [Zloader](https://github.com/Mufanc/z-loader) [for LSPosed](https://t.me/mufanc_chan/28) чтобы загрузить только LSPosed.

::: warning
Zloader НЕ совместим ни с одной реализацией Zygisk, например, ZygiskNext или Zygisk_mod, и вы также не можете использовать APM, зависящие от Zygisk. Пожалуйста, отключите или удалите любую другую реализацию Zygisk перед использованием Zloader.
:::

::: info
Zloader все еще находится на ранней стадии разработки, приглашаем вас отправлять pull-запросы разработчикам Zloader или открывать тикеты по любым вопросам использования.
:::

## Не можете использовать Shamiko?

Мы не можем полностью поддерживать Shamiko из-за его закрытого исходного кода и отсутствия обновлений.

::: danger
**Разработчики APatch не несут ответственности за сбои в случаях использования Shamiko, используйте его на свой страх и риск!**
:::

## Поддерживается ли Zygisk? {#zygisk-support}

Как и KernelSU, APatch по умолчанию не поддерживает Zygisk.

APatch может использовать [ZygiskNext](https://github.com/Dr-TSNG/ZygiskNext) чтобы добавить поддержку Zygisk.

Также, можете использовать [Zygisk_mod](https://github.com/Admirepowered/Zygisk_mod).

## Root-детекторы обнаруживают у вас root?

Если приложения, которыми вы пользуетесь в повседневной жизни работают нормально, не стоит слишком беспокоиться о программах-обнаружителях.
